# üöÄ Complete Deployment Guide for Render

This is a step-by-step guide to deploy your Real Estate Chatbot to Render.

---

## üìã Prerequisites

Before starting, make sure you have:
- ‚úÖ A GitHub account
- ‚úÖ Your code pushed to a GitHub repository
- ‚úÖ A Render account (sign up free at https://render.com)

---

## üéØ Step-by-Step Deployment Process

### **STEP 1: Prepare Your Code for GitHub**

If your code is not on GitHub yet, follow these steps:

1. **Initialize Git** (if not already done):
   ```bash
   git init
   ```

2. **Add all files**:
   ```bash
   git add .
   ```

3. **Commit your changes**:
   ```bash
   git commit -m "Prepare for Render deployment"
   ```

4. **Create a repository on GitHub**:
   - Go to https://github.com/new
   - Create a new repository (e.g., `real-estate-chatbot`)
   - **DO NOT** initialize with README, .gitignore, or license

5. **Connect and push to GitHub**:
   ```bash
   git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO_NAME.git
   git branch -M main
   git push -u origin main
   ```
   Replace `YOUR_USERNAME` and `YOUR_REPO_NAME` with your actual GitHub username and repository name.

---

### **STEP 2: Sign Up / Log In to Render**

1. Go to https://render.com
2. Click **"Get Started for Free"** or **"Sign In"**
3. Sign up using your GitHub account (recommended) or email

---

### **STEP 3: Deploy Using Blueprint (Easiest Method)**

This method uses the `render.yaml` file we created:

1. **Navigate to Dashboard**:
   - After logging in, you'll see the Render dashboard
   - Click the **"New +"** button (top right)

2. **Select Blueprint**:
   - Click **"New Blueprint"** from the dropdown menu

3. **Connect GitHub Repository**:
   - Click **"Connect account"** if you haven't connected GitHub yet
   - Authorize Render to access your GitHub repositories
   - Select your repository (`real-estate-chatbot` or your repo name)
   - Click **"Connect"**

4. **Render Auto-Detection**:
   - Render will automatically detect the `render.yaml` file
   - You'll see a preview of the service configuration
   - Click **"Apply"** to proceed

5. **Wait for Deployment**:
   - Render will start building your application
   - This process takes 5-10 minutes for the first deployment
   - You can watch the build logs in real-time

---

### **STEP 4: Configure Environment Variables**

After the service is created, you need to set the `ALLOWED_HOSTS`:

1. **Go to Your Service**:
   - Click on your service name in the dashboard

2. **Navigate to Environment**:
   - Click on **"Environment"** in the left sidebar

3. **Add Environment Variable**:
   - Click **"Add Environment Variable"**
   - **Key**: `ALLOWED_HOSTS`
   - **Value**: Your Render service URL (you'll find it at the top of the service page, e.g., `real-estate-chatbot.onrender.com`)
   - Click **"Save Changes"**

4. **Note**: 
   - `SECRET_KEY` is already auto-generated by Render (from render.yaml)
   - `DEBUG` is already set to `False`
   - `PYTHON_VERSION` is already set to `3.11.9`

5. **Redeploy** (if needed):
   - After adding environment variables, Render may auto-redeploy
   - If not, go to **"Manual Deploy"** ‚Üí **"Deploy latest commit"**

---

### **ALTERNATIVE: Manual Setup (If Blueprint Doesn't Work)**

If you prefer manual setup or Blueprint has issues:

1. **Create New Web Service**:
   - Click **"New +"** ‚Üí **"Web Service"**

2. **Connect Repository**:
   - Connect your GitHub account if not already connected
   - Select your repository
   - Click **"Connect"**

3. **Configure Service Settings**:
   
   **Basic Settings:**
   - **Name**: `real-estate-chatbot` (or your preferred name)
   - **Region**: Choose closest to your users (e.g., `Oregon (US West)`)
   - **Branch**: `main` (or `master` if that's your default branch)
   - **Root Directory**: Leave empty (or set to `backend` if needed)
   - **Environment**: `Python 3`
   - **Build Command**: 
     ```
     cd backend && pip install -r requirements.txt && python manage.py collectstatic --noinput && python manage.py migrate
     ```
   - **Start Command**: 
     ```
     cd backend && gunicorn backend.wsgi:application --bind 0.0.0.0:$PORT
     ```
   - **Plan**: Select **"Free"** (or choose a paid plan)

4. **Add Environment Variables**:
   Click **"Advanced"** ‚Üí **"Add Environment Variable"** and add:
   
   | Key | Value |
   |-----|-------|
   | `SECRET_KEY` | Generate one: Run `python -c "import secrets; print(secrets.token_urlsafe(50))"` in your terminal |
   | `DEBUG` | `False` |
   | `ALLOWED_HOSTS` | `your-app-name.onrender.com` (you'll get this after creation) |
   | `PYTHON_VERSION` | `3.11.9` |

5. **Create Service**:
   - Click **"Create Web Service"**
   - Render will start building and deploying

---

### **STEP 5: Monitor Deployment**

1. **Watch Build Logs**:
   - You'll see real-time build logs
   - Look for messages like:
     - ‚úÖ "Installing dependencies..."
     - ‚úÖ "Collecting static files..."
     - ‚úÖ "Running migrations..."
     - ‚úÖ "Build successful"

2. **Check for Errors**:
   - If build fails, check the error message
   - Common issues are listed in the Troubleshooting section below

3. **Wait for "Live" Status**:
   - Once deployment is complete, status will show **"Live"**
   - Your app URL will be displayed (e.g., `https://real-estate-chatbot.onrender.com`)

---

### **STEP 6: Verify Deployment**

1. **Test Your Application**:
   - Open your app URL in a browser
   - Test your API endpoints
   - Check if the health endpoint works: `https://your-app.onrender.com/api/health/` (if you have one)

2. **Check Logs**:
   - Go to **"Logs"** tab in Render dashboard
   - Verify there are no errors
   - Look for "Application startup complete" or similar messages

---

## üîß Troubleshooting Common Issues

### **Issue 1: Build Fails - "Module not found"**
**Solution**: 
- Check `backend/requirements.txt` has all dependencies
- Ensure all packages are listed with correct versions

### **Issue 2: Build Fails - "Command not found: gunicorn"**
**Solution**: 
- Verify `gunicorn==21.2.0` is in `requirements.txt`
- Check the build command includes `pip install -r requirements.txt`

### **Issue 3: Application Crashes - "DisallowedHost"**
**Solution**: 
- Add your Render URL to `ALLOWED_HOSTS` environment variable
- Format: `your-app-name.onrender.com` (no `https://`)

### **Issue 4: Static Files 404 Error**
**Solution**: 
- Verify `collectstatic` runs in build command
- Check `STATIC_ROOT` is set in `settings.py` (already configured)

### **Issue 5: Database Migration Errors**
**Solution**: 
- Check build logs for specific migration errors
- Ensure `migrate` command is in build command
- SQLite should work, but for production consider PostgreSQL

### **Issue 6: Port Binding Error**
**Solution**: 
- Verify start command uses `$PORT` environment variable
- Check Procfile has: `--bind 0.0.0.0:$PORT`

---

## üìù Important Notes

- ‚è±Ô∏è **First Deployment**: Takes 5-10 minutes
- üîÑ **Auto-Deploy**: Render auto-deploys on every push to your main branch
- üíæ **Database**: Currently using SQLite (works for free tier, but data resets on redeploy)
- üîí **Security**: `SECRET_KEY` is auto-generated and secure
- üìä **Logs**: Always check logs if something doesn't work
- üÜì **Free Tier**: Services sleep after 15 minutes of inactivity (wakes up on next request)

---

## üîÑ Updating Your Deployment

To update your deployed app:

1. **Make changes** to your code locally
2. **Commit and push** to GitHub:
   ```bash
   git add .
   git commit -m "Update application"
   git push origin main
   ```
3. **Render auto-deploys**: Render will automatically detect the push and redeploy
4. **Monitor**: Watch the deployment in Render dashboard

---

## ‚úÖ Post-Deployment Checklist

- [ ] Application is accessible at your Render URL
- [ ] API endpoints are responding correctly
- [ ] Environment variables are set correctly
- [ ] No errors in logs
- [ ] Static files are loading (if applicable)
- [ ] Database migrations completed successfully

---

## üÜò Need Help?

If you encounter any issues:
1. Check the **Logs** tab in Render dashboard
2. Review the **Troubleshooting** section above
3. Verify all configuration files are correct:
   - `render.yaml` exists in root
   - `Procfile` exists in root
   - `backend/requirements.txt` has all dependencies
   - `backend/backend/settings.py` uses environment variables

---

## üéâ Success!

Once deployed, your Real Estate Chatbot will be live at:
**`https://your-app-name.onrender.com`**

Share this URL with others to access your application!

